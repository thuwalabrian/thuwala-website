{% extends "base.html" %}

{% block title %}Contact Us - Thuwala Co.{% endblock %}

{% block content %}
<!-- Contact Hero -->
<section class="contact-hero">
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title animate__animated animate__fadeInUp">
                Let's Start Your Success Story
            </h1>
            <p class="hero-subtitle animate__animated animate__fadeInUp animate__delay-1s">
                Reach out to discuss how our services can transform your business operations
            </p>
            <div class="hero-stats animate__animated animate__fadeInUp animate__delay-2s">
                <div class="stat">
                    <i class="fas fa-clock"></i>
                    <span>24-48 hr Response Time</span>
                </div>
                <div class="stat">
                    <i class="fas fa-check-circle"></i>
                    <span>Free Initial Consultation</span>
                </div>
                <div class="stat">
                    <i class="fas fa-users"></i>
                    <span>Dedicated Support</span>
                </div>
            </div>
        </div>
    </div>
    <div class="hero-wave">
        <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
            <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"></path>
        </svg>
    </div>
</section>

<!-- Contact Main Section -->
<section class="contact-main">
    <div class="container">
        <div class="contact-grid">
            <!-- Contact Information -->
            <div class="contact-info-section">
                <div class="section-header">
                    <h2>Get in Touch</h2>
                    <p>Multiple ways to reach us for your convenience</p>
                </div>
                
                <div class="contact-cards">
                    <div class="contact-card">
                        <div class="card-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="card-content">
                            <h3>Head Office</h3>
                            <p>Lilongwe, Malawi</p>
                            <a href="https://maps.google.com/?q=Lilongwe+Malawi" target="_blank" class="card-link">
                                <i class="fas fa-directions"></i> Get Directions
                            </a>
                        </div>
                    </div>
                    
                    <div class="contact-card">
                        <div class="card-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div class="card-content">
                            <h3>Phone & WhatsApp</h3>
                            <p>+265 887 580 622</p>
                            <a href="https://wa.me/265887580622" target="_blank" class="card-link">
                                <i class="fab fa-whatsapp"></i> Chat on WhatsApp
                            </a>
                        </div>
                    </div>
                    
                    <div class="contact-card">
                        <div class="card-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="card-content">
                            <h3>Email</h3>
                            <p>info@thuwalaco.com</p>
                            <a href="mailto:info@thuwalaco.com" class="card-link">
                                <i class="fas fa-paper-plane"></i> Send Email
                            </a>
                        </div>
                    </div>
                    
                    <div class="contact-card">
                        <div class="card-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="card-content">
                            <h3>Business Hours</h3>
                            <p>Monday - Friday: 8:00 AM - 5:00 PM</p>
                            <p>Saturday: 9:00 AM - 1:00 PM</p>
                            <span class="current-status">
                                <i class="fas fa-circle"></i> Currently Open
                            </span>
                        </div>
                    </div>
                </div>
                
                <!-- Social Media -->
                <div class="social-section">
                    <h3>Follow & Connect</h3>
                    <p>Stay updated with our latest news and insights</p>
                    <div class="social-links">
                        <a href="#" class="social-link" aria-label="Facebook">
                            <i class="fab fa-facebook-f"></i>
                            <span>Facebook</span>
                        </a>
                        <a href="#" class="social-link" aria-label="Twitter">
                            <i class="fab fa-twitter"></i>
                            <span>Twitter</span>
                        </a>
                        <a href="#" class="social-link" aria-label="LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                            <span>LinkedIn</span>
                        </a>
                        <a href="#" class="social-link" aria-label="Instagram">
                            <i class="fab fa-instagram"></i>
                            <span>Instagram</span>
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Contact Form -->
            <div class="contact-form-section">
                <div class="form-header">
                    <h2>Send Us a Message</h2>
                    <p>Fill out the form below and we'll get back to you promptly</p>
                </div>
                
                <form method="POST" action="{{ url_for('contact') }}" id="contactForm" class="contact-form" data-contact-form="true">
                    <!-- Service Interest (if coming from services page) -->
                    <div class="form-group service-interest">
                        <label for="service_interest">
                            <i class="fas fa-briefcase"></i> Service of Interest
                        </label>
                        <select name="service_interest" id="service_interest" class="form-control">
                            <option value="">Select a service (Optional)</option>
                            <option value="administrative">Administrative & Executive Support</option>
                            <option value="operations">Project & Operations Support</option>
                            <option value="data">Data Management & Analytics</option>
                            <option value="communications">Communications & Documentation</option>
                            <option value="branding">Branding, Design & Marketing</option>
                            <option value="business">Business & Startup Support</option>
                            <option value="systems">Systems & Process Optimization</option>
                            <option value="training">Capacity Building & Training</option>
                            <option value="creative">Creative & Individual Services</option>
                            <option value="consulting">Consulting & Strategy</option>
                            <option value="other">Other / Multiple Services</option>
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <input type="text" name="name" placeholder="Your Full Name *" required class="form-control">
                            <i class="fas fa-user form-icon"></i>
                        </div>
                        <div class="form-group">
                            <input type="email" name="email" placeholder="Email Address *" required class="form-control">
                            <i class="fas fa-envelope form-icon"></i>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <input type="tel" name="phone" placeholder="Phone Number" class="form-control">
                            <i class="fas fa-phone form-icon"></i>
                        </div>
                        <div class="form-group">
                            <input type="text" name="company" placeholder="Company/Organization" class="form-control">
                            <i class="fas fa-building form-icon"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <input type="text" name="subject" placeholder="Subject *" required class="form-control">
                        <i class="fas fa-tag form-icon"></i>
                    </div>
                    
                    <div class="form-group">
                        <textarea name="message" placeholder="Your Message *" rows="6" required class="form-control"></textarea>
                        <i class="fas fa-comment form-icon"></i>
                    </div>
                    
                    <!-- Inquiry Type -->
                    <div class="form-group inquiry-type">
                        <label>Inquiry Type</label>
                        <div class="type-options">
                            <label class="type-option">
                                <input type="radio" name="inquiry_type" value="quote" checked>
                                <span class="type-content">
                                    <i class="fas fa-dollar-sign"></i>
                                    <span>Request Quote</span>
                                </span>
                            </label>
                            <label class="type-option">
                                <input type="radio" name="inquiry_type" value="consultation">
                                <span class="type-content">
                                    <i class="fas fa-calendar-check"></i>
                                    <span>Free Consultation</span>
                                </span>
                            </label>
                            <label class="type-option">
                                <input type="radio" name="inquiry_type" value="partnership">
                                <span class="type-content">
                                    <i class="fas fa-handshake"></i>
                                    <span>Partnership</span>
                                </span>
                            </label>
                            <label class="type-option">
                                <input type="radio" name="inquiry_type" value="general">
                                <span class="type-content">
                                    <i class="fas fa-question-circle"></i>
                                    <span>General Inquiry</span>
                                </span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- File Upload (Optional) -->
                    <div class="form-group file-upload">
                        <label for="file_upload">
                            <i class="fas fa-paperclip"></i> Attach Files (Optional)
                        </label>
                        <div class="upload-area" id="uploadArea">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Drag & drop files or <span>browse</span></p>
                            <input type="file" id="file_upload" name="file_upload" multiple style="display: none;">
                            <small>Max file size: 5MB (PDF, DOC, DOCX, PNG, JPG)</small>
                        </div>
                        <div id="fileList" class="file-list"></div>
                    </div>
                    
                    <div class="form-footer">
                        <div class="form-check">
                            <input type="checkbox" id="newsletter" name="newsletter" checked>
                            <label for="newsletter">Subscribe to our newsletter for updates and insights</label>
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-submit">
                            <span class="btn-text">Send Message</span>
                            <i class="fas fa-paper-plane"></i>
                            <div class="loading-spinner"></div>
                        </button>
                    </div>
                    
                    <p class="form-note">
                        <i class="fas fa-shield-alt"></i> Your information is secure and will never be shared with third parties.
                    </p>
                </form>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="contact-faq">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Frequently Asked Questions</h2>
            <p class="section-subtitle">Quick answers to common questions about contacting us</p>
        </div>
        
        <div class="faq-grid">
            <div class="faq-item">
                <div class="faq-question">
                    <h3>What happens after I submit the form?</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>We'll contact you within 24-48 hours to discuss your needs in detail and schedule a free consultation if required.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Do you offer free consultations?</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Yes! We offer a free 30-minute initial consultation to understand your requirements and discuss how we can help.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>What information should I include in my message?</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Please include your specific needs, timeline, budget (if any), and any relevant background information about your organization.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Can I schedule a meeting directly?</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Yes, you can request a meeting through the form. We'll confirm availability and send you a calendar invitation.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="contact-cta">
    <div class="container">
        <div class="cta-content">
            <div class="cta-text">
                <h2>Prefer a Quick Call?</h2>
                <p>Speak directly with our team for immediate assistance</p>
            </div>
            <div class="cta-action">
                <a href="tel:+265887580622" class="btn btn-primary">
                    <i class="fas fa-phone"></i> Call Now: +265 887 580 622
                </a>
                <a href="https://wa.me/265887580622" target="_blank" class="btn btn-secondary">
                    <i class="fab fa-whatsapp"></i> Message on WhatsApp
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Map Section -->
<section class="contact-map">
    <div class="container">
        <div class="map-header">
            <h2>Our Location</h2>
            <p>Based in Lilongwe, serving clients across Malawi and internationally</p>
        </div>
        <div class="map-container">
            <div class="map-placeholder">
                <div class="placeholder-content">
                    <i class="fas fa-map-marked-alt"></i>
                    <h3>Lilongwe, Malawi</h3>
                    <p>Central Business District</p>
                    <a href="https://maps.google.com/?q=Lilongwe+Malawi" target="_blank" class="btn btn-outline">
                        <i class="fas fa-map-pin"></i> Open in Google Maps
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Auto-fill service interest if coming from services page
        const serviceFromStorage = sessionStorage.getItem('interestedService');
        if (serviceFromStorage) {
            const serviceSelect = document.getElementById('service_interest');
            const options = Array.from(serviceSelect.options);
            const matchingOption = options.find(option => 
                option.text.toLowerCase().includes(serviceFromStorage.toLowerCase())
            );
            if (matchingOption) {
                matchingOption.selected = true;
            }
            // Clear storage after use
            sessionStorage.removeItem('interestedService');
        }
        
        // File upload functionality
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('file_upload');
        const fileList = document.getElementById('fileList');
        const maxSize = 5 * 1024 * 1024; // 5MB
        
        if (uploadArea && fileInput) {
            uploadArea.addEventListener('click', () => fileInput.click());
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                handleFiles(e.dataTransfer.files);
            });
            
            fileInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });
        }
        
        function handleFiles(files) {
            for (let file of files) {
                if (file.size > maxSize) {
                    alert(`File "${file.name}" exceeds 5MB limit`);
                    continue;
                }
                
                if (!file.type.match(/(pdf|doc|docx|png|jpg|jpeg)/i)) {
                    alert(`File "${file.name}" is not a supported file type`);
                    continue;
                }
                
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <i class="fas fa-file"></i>
                    <div class="file-info">
                        <span class="file-name">${file.name}</span>
                        <span class="file-size">${formatFileSize(file.size)}</span>
                    </div>
                    <button type="button" class="remove-file">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                const removeBtn = fileItem.querySelector('.remove-file');
                removeBtn.addEventListener('click', () => {
                    fileItem.remove();
                });
                
                if (fileList) {
                    fileList.appendChild(fileItem);
                }
            }
        }
        
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // FAQ accordion
        const faqQuestions = document.querySelectorAll('.faq-question');
        
        faqQuestions.forEach(question => {
            question.addEventListener('click', function() {
                const answer = this.nextElementSibling;
                const icon = this.querySelector('i');
                
                // Toggle current answer
                answer.classList.toggle('active');
                icon.classList.toggle('fa-chevron-up');
                icon.classList.toggle('fa-chevron-down');
                
                // Close other answers
                faqQuestions.forEach(otherQuestion => {
                    if (otherQuestion !== this) {
                        const otherAnswer = otherQuestion.nextElementSibling;
                        const otherIcon = otherQuestion.querySelector('i');
                        otherAnswer.classList.remove('active');
                        otherIcon.classList.remove('fa-chevron-up');
                        otherIcon.classList.add('fa-chevron-down');
                    }
                });
            });
        });
        
        // Business hours status
        function updateBusinessStatus() {
            const now = new Date();
            const day = now.getDay();
            const hour = now.getHours();
            const statusElement = document.querySelector('.current-status');
            
            if (!statusElement) return;
            
            if (day >= 1 && day <= 5) {
                if (hour >= 8 && hour < 17) {
                    statusElement.innerHTML = '<i class="fas fa-circle"></i> Currently Open';
                    statusElement.classList.add('open');
                } else {
                    statusElement.innerHTML = '<i class="fas fa-circle"></i> Currently Closed';
                    statusElement.classList.remove('open');
                }
            } else if (day === 6) {
                if (hour >= 9 && hour < 13) {
                    statusElement.innerHTML = '<i class="fas fa-circle"></i> Currently Open';
                    statusElement.classList.add('open');
                } else {
                    statusElement.innerHTML = '<i class="fas fa-circle"></i> Currently Closed';
                    statusElement.classList.remove('open');
                }
            } else {
                statusElement.innerHTML = '<i class="fas fa-circle"></i> Currently Closed';
                statusElement.classList.remove('open');
            }
        }
        
        updateBusinessStatus();
        setInterval(updateBusinessStatus, 60000);
    });
</script>
{% endblock %}